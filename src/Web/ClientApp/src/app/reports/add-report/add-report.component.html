<div *ngIf="jobInProgress | async" class="spinner-overlay">
  <div class="spinner-border" role="status">
    <span class="sr-only"></span>
  </div>
</div>

<div [class.blocked]="jobInProgress | async">
  <div class="form-group">
    <label for="reportTitle">Report Title</label>
    <input
      type="text"
      id="reportTitle"
      class="form-control"
      [(ngModel)]="reportTitle"
    />
  </div>

  <div class="form-group">
    <label for="databaseSelect">Select Database</label>
    <select
      id="databaseSelect"
      class="form-control"
      [(ngModel)]="selectedDatabaseId"
      (change)="getTables(selectedDatabaseId)"
    >
      <option *ngFor="let db of databases" [value]="db.id">
        {{ db.name }}
      </option>
    </select>
  </div>

  <div class="form-group" *ngIf="selectedDatabaseId">
    <label for="tableSelect">Select Tables</label>
    <select
      id="tableSelect"
      class="form-control"
      multiple
      [(ngModel)]="selectedTableIds"
    >
      <option *ngFor="let table of availableTables" [value]="table.id">
        {{ table.name }}
      </option>
    </select>
    <small class="form-text text-muted">
      Hold Ctrl (or Command on Mac) to select multiple tables.
    </small>
  </div>

  <div class="form-group" *ngIf="selectedTableIds && selectedTableIds.length">
    <label for="formatSelect">Select Format</label>
    <select
      id="formatSelect"
      class="form-control"
      [(ngModel)]="selectedFormat"
    >
      <option *ngFor="let format of availableFormats" [value]="format">
        {{ format }}
      </option>
    </select>
  </div>

  <button class="btn btn-primary" (click)="doGenerate()">Generate Report</button>
</div>